<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guia Interativo: Desativando Mensagens Autom√°ticas</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Custom styles for specific elements not covered by Tailwind utilities */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #fdfbf7; /* Warm neutral background */
            color: #1f2937;
        }
        
        /* Chart container styles */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 300px;
        }

        /* Mobile Simulator Styles */
        .mobile-frame {
            border: 12px solid #2d3748;
            border-radius: 30px;
            overflow: hidden;
            position: relative;
            background: white;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }

        .toggle-switch {
            appearance: none;
            width: 40px;
            height: 24px;
            background: #cbd5e0;
            border-radius: 12px;
            position: relative;
            outline: none;
            cursor: not-allowed; /* Simulated interface */
        }
        
        .toggle-switch::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            transition: transform 0.3s;
        }

        .toggle-switch.checked {
            background: #48bb78;
        }

        .toggle-switch.checked::after {
            transform: translateX(16px);
        }

        /* Tab active state */
        .tab-btn.active {
            border-bottom: 3px solid #10b981;
            color: #065f46;
            font-weight: 600;
        }

        /* Timeline connector */
        .step-connector {
            position: absolute;
            left: 15px;
            top: 40px;
            bottom: -20px;
            width: 2px;
            background-color: #e5e7eb;
            z-index: 0;
        }
        
        .step-item:last-child .step-connector {
            display: none;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <!-- Application Structure Plan -->
    <!-- 
    The application is structured into four main phases:
    1. Diagnosis (Hero): Users identify their problem visually (Bubble vs Input field). This filters the content.
    2. Interactive Guides (Simulation): Two distinct paths (WhatsApp Business & Meta Ads). Instead of static text, we use a "Device Simulator" where users step through the UI actions visually.
    3. Comparison Matrix: A clear visual breakdown of the differences to reinforce learning.
    4. Action Checklist: A functional checklist that updates a Chart.js progress ring, gamifying the completion of the task.
    
    Why this structure? The source content solves a specific confusion ("Where is this message coming from?"). The Diagnosis phase immediately addresses this. The Simulator builds muscle memory for the solution.
    -->

    <!-- Visualization & Content Choices -->
    <!-- 
    1. Diagnostic Cards: Goal: Identify Source. Method: HTML/CSS Cards with visual representations of chat interfaces. Interaction: Click to select path.
    2. Device Simulator: Goal: Teach the "How-To". Method: CSS-styled mobile frame. Interaction: "Next Step" buttons change the internal screen content (Vue-like reactivity with Vanilla JS). 
    3. Progress Tracker: Goal: Encourage completion. Method: Chart.js Doughnut Chart. Interaction: Checking boxes updates data and redraws chart.
    4. Comparison Table: Goal: Clarify distinctions. Method: HTML Grid.
    
    CONFIRMATION: NO SVG graphics used. NO Mermaid JS used.
    -->
    
    <!-- Chosen Palette: Warm Neutrals with Green (WhatsApp) and Blue (Meta) Accents -->

    <!-- Header -->
    <header class="bg-white border-b border-gray-200 sticky top-0 z-50">
        <div class="max-w-6xl mx-auto px-4 py-4 flex justify-between items-center">
            <div class="flex items-center gap-2">
                <span class="text-2xl">üõ†Ô∏è</span>
                <h1 class="text-xl font-bold text-gray-800">Assistente de Automa√ß√£o de Mensagens</h1>
            </div>
            <nav class="hidden md:flex gap-6 text-sm font-medium text-gray-600">
                <button onclick="scrollToSection('diagnostico')" class="hover:text-green-600 transition">Diagn√≥stico</button>
                <button onclick="scrollToSection('tutoriais')" class="hover:text-green-600 transition">Passo a Passo</button>
                <button onclick="scrollToSection('checklist')" class="hover:text-green-600 transition">Checklist</button>
            </nav>
        </div>
    </header>

    <main class="flex-grow">
        
        <!-- SECTION 1: INTRODUCTION & DIAGNOSIS -->
        <section id="diagnostico" class="py-12 px-4 max-w-5xl mx-auto">
            <div class="text-center mb-10">
                <h2 class="text-3xl font-bold text-gray-900 mb-4">Onde a mensagem indesejada aparece?</h2>
                <p class="text-lg text-gray-600 max-w-2xl mx-auto">
                    Muitas vezes confundimos mensagens autom√°ticas do WhatsApp com configura√ß√µes de an√∫ncios. 
                    Selecione abaixo o cen√°rio que voc√™ est√° enfrentando para ver a solu√ß√£o correta.
                </p>
            </div>

            <div class="grid md:grid-cols-2 gap-8">
                <!-- Option A: WhatsApp Business -->
                <div id="card-wa" class="bg-white p-6 rounded-2xl shadow-lg border-2 border-transparent hover:border-green-400 cursor-pointer transition-all transform hover:-translate-y-1" onclick="selectPath('wa')">
                    <div class="flex justify-center mb-4">
                        <div class="w-full max-w-[250px] bg-gray-100 p-3 rounded-lg border border-gray-200">
                            <div class="flex flex-col gap-2">
                                <div class="bg-white p-2 rounded shadow-sm self-start max-w-[80%] text-xs text-gray-800 border-l-4 border-green-500">
                                    <p class="font-bold text-[10px] text-gray-500 mb-1">Mensagem de sauda√ß√£o</p>
                                    Ol√°! Como podemos ajudar voc√™ hoje?
                                </div>
                            </div>
                        </div>
                    </div>
                    <h3 class="text-xl font-bold text-gray-800 text-center mb-2">Bal√£o Cinza (Enviado pela Loja)</h3>
                    <p class="text-sm text-gray-600 text-center">
                        A mensagem aparece como se <strong>voc√™</strong> tivesse enviado para o cliente automaticamente.
                    </p>
                    <div class="mt-4 text-center">
                        <span class="inline-block px-4 py-1 bg-green-100 text-green-700 rounded-full text-xs font-bold">√â o meu caso</span>
                    </div>
                </div>

                <!-- Option B: Meta Ads -->
                <div id="card-meta" class="bg-white p-6 rounded-2xl shadow-lg border-2 border-transparent hover:border-blue-400 cursor-pointer transition-all transform hover:-translate-y-1" onclick="selectPath('meta')">
                    <div class="flex justify-center mb-4">
                        <div class="w-full max-w-[250px] bg-gray-100 p-3 rounded-lg border border-gray-200">
                            <div class="flex flex-col gap-2">
                                <div class="bg-green-100 p-2 rounded shadow-sm self-end max-w-[80%] text-xs text-gray-800">
                                    Ol√°, vi o an√∫ncio e gostaria de saber mais...
                                </div>
                                <div class="text-[10px] text-gray-400 text-right mt-[-5px]">Pr√©-preenchido no campo de texto</div>
                            </div>
                        </div>
                    </div>
                    <h3 class="text-xl font-bold text-gray-800 text-center mb-2">Pr√©-preenchido (Input do Cliente)</h3>
                    <p class="text-sm text-gray-600 text-center">
                        O texto j√° vem escrito no campo de digita√ß√£o quando o cliente clica no an√∫ncio.
                    </p>
                    <div class="mt-4 text-center">
                        <span class="inline-block px-4 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-bold">√â o meu caso</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 2: INTERACTIVE SIMULATOR (Dynamic Content) -->
        <section id="tutoriais" class="bg-white py-12 border-t border-gray-100">
            <div class="max-w-6xl mx-auto px-4">
                <div class="flex flex-col md:flex-row gap-12 items-start">
                    
                    <!-- Left Column: Instructions -->
                    <div class="w-full md:w-1/2">
                        <div id="instruction-header" class="mb-6">
                            <span class="text-green-600 font-bold tracking-wider text-sm uppercase">Tutorial Passo a Passo</span>
                            <h2 id="tutorial-title" class="text-3xl font-bold text-gray-900 mt-2">Selecione um caso acima</h2>
                            <p id="tutorial-desc" class="text-gray-600 mt-2">Escolha uma das op√ß√µes no diagn√≥stico para ver o tutorial detalhado.</p>
                        </div>

                        <!-- Step List Container -->
                        <div id="steps-container" class="space-y-0 hidden">
                            <!-- Steps will be injected here via JS -->
                        </div>
                    </div>

                    <!-- Right Column: Visual Simulator -->
                    <div class="w-full md:w-1/2 flex justify-center sticky top-24">
                        <div class="mobile-frame w-[300px] h-[600px] bg-gray-50 flex flex-col">
                            <!-- Simulator Header -->
                            <div class="bg-green-700 h-16 flex items-center px-4 shadow-md z-10">
                                <div class="text-white font-bold" id="sim-header-title">WhatsApp Bus.</div>
                            </div>
                            
                            <!-- Simulator Body -->
                            <div id="sim-screen" class="flex-grow p-4 overflow-y-auto bg-gray-50 relative">
                                <!-- Default State -->
                                <div class="h-full flex flex-col items-center justify-center text-gray-400 text-center">
                                    <span class="text-4xl mb-2">üëÜ</span>
                                    <p>Selecione um passo ao lado para visualizar a a√ß√£o.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 3: CHECKLIST & ANALYTICS -->
        <section id="checklist" class="py-16 px-4 bg-[#fdfbf7]">
            <div class="max-w-4xl mx-auto">
                <div class="text-center mb-10">
                    <h2 class="text-3xl font-bold text-gray-900">Checklist de Verifica√ß√£o Final</h2>
                    <p class="text-gray-600">Garanta que todas as configura√ß√µes foram ajustadas corretamente.</p>
                </div>

                <div class="bg-white rounded-2xl shadow-xl p-8 flex flex-col md:flex-row gap-10 items-center">
                    
                    <!-- Interactive Checklist -->
                    <div class="flex-grow w-full">
                        <h3 class="font-bold text-lg mb-4 border-b pb-2">Passos Realizados</h3>
                        <div class="space-y-4">
                            <label class="flex items-start gap-3 p-3 hover:bg-gray-50 rounded-lg cursor-pointer transition">
                                <input type="checkbox" class="task-check mt-1 w-5 h-5 text-green-600 rounded focus:ring-green-500" onchange="updateProgress()">
                                <div>
                                    <span class="font-medium text-gray-800">Desativei a "Mensagem de Sauda√ß√£o" no App</span>
                                    <p class="text-xs text-gray-500">No WhatsApp Business > Ferramentas Comerciais.</p>
                                </div>
                            </label>

                            <label class="flex items-start gap-3 p-3 hover:bg-gray-50 rounded-lg cursor-pointer transition">
                                <input type="checkbox" class="task-check mt-1 w-5 h-5 text-green-600 rounded focus:ring-green-500" onchange="updateProgress()">
                                <div>
                                    <span class="font-medium text-gray-800">Revisei o "Modelo de Mensagem" no An√∫ncio</span>
                                    <p class="text-xs text-gray-500">No Gerenciador de An√∫ncios da Meta.</p>
                                </div>
                            </label>

                            <label class="flex items-start gap-3 p-3 hover:bg-gray-50 rounded-lg cursor-pointer transition">
                                <input type="checkbox" class="task-check mt-1 w-5 h-5 text-green-600 rounded focus:ring-green-500" onchange="updateProgress()">
                                <div>
                                    <span class="font-medium text-gray-800">Publiquei as altera√ß√µes no Gerenciador</span>
                                    <p class="text-xs text-gray-500">Mudan√ßas em an√∫ncios s√≥ valem ap√≥s clicar em "Publicar".</p>
                                </div>
                            </label>
                        </div>
                        <div id="completion-message" class="mt-6 p-4 bg-green-50 text-green-800 rounded-lg hidden text-center font-bold">
                            üéâ Tudo pronto! Suas configura√ß√µes foram atualizadas.
                        </div>
                    </div>

                    <!-- Chart Container -->
                    <div class="w-full md:w-1/3 flex flex-col items-center">
                        <div class="chart-container">
                            <canvas id="progressChart"></canvas>
                        </div>
                        <p class="text-sm text-gray-500 mt-2 text-center">Progresso da Solu√ß√£o</p>
                    </div>

                </div>
            </div>
        </section>

        <!-- SECTION 4: COMPARISON TABLE (Static Reference) -->
        <section class="bg-white py-12 border-t border-gray-200">
            <div class="max-w-4xl mx-auto px-4">
                <h3 class="text-2xl font-bold text-center mb-8">Resumo das Diferen√ßas</h3>
                <div class="overflow-hidden border border-gray-200 rounded-xl shadow-sm">
                    <div class="grid grid-cols-3 bg-gray-50 p-4 font-bold text-gray-700 text-sm md:text-base">
                        <div>Caracter√≠stica</div>
                        <div class="text-center text-green-700">WhatsApp Business</div>
                        <div class="text-center text-blue-700">Meta Ads (An√∫ncio)</div>
                    </div>
                    <div class="divide-y divide-gray-100">
                        <div class="grid grid-cols-3 p-4 hover:bg-gray-50 transition">
                            <div class="font-medium text-sm text-gray-600">Onde aparece?</div>
                            <div class="text-center text-sm">Bal√£o de resposta da loja</div>
                            <div class="text-center text-sm">Campo de texto do cliente</div>
                        </div>
                        <div class="grid grid-cols-3 p-4 hover:bg-gray-50 transition">
                            <div class="font-medium text-sm text-gray-600">Quem envia?</div>
                            <div class="text-center text-sm">Autom√°tico (Bot)</div>
                            <div class="text-center text-sm">O Cliente (Pr√©-preenchido)</div>
                        </div>
                        <div class="grid grid-cols-3 p-4 hover:bg-gray-50 transition">
                            <div class="font-medium text-sm text-gray-600">Onde configurar?</div>
                            <div class="text-center text-sm">Ferramentas Comerciais (App)</div>
                            <div class="text-center text-sm">Editar An√∫ncio (Gerenciador)</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-gray-800 text-gray-400 py-8 text-center text-sm">
        <p>Baseado no Guia de Desativa√ß√£o de Mensagens Autom√°ticas.</p>
        <p class="mt-2">¬© 2024 Ferramenta de Suporte</p>
    </footer>

    <!-- LOGIC -->
    <script>
        // --- DATA STORE ---
        const tutorialData = {
            wa: {
                title: "Configura√ß√£o do WhatsApp Business",
                desc: "Siga estes passos para desativar a mensagem que a loja envia automaticamente.",
                color: "green",
                header: "WhatsApp Business",
                steps: [
                    {
                        title: "Abrir Menu",
                        desc: "Toque nos tr√™s pontinhos (‚ãÆ) no canto superior direito.",
                        screenHtml: `
                            <div class="flex justify-between items-center bg-green-700 p-2 text-white">
                                <span>WhatsApp Business</span>
                                <div class="bg-white/20 rounded-full w-8 h-8 flex items-center justify-center animate-pulse">‚ãÆ</div>
                            </div>
                            <div class="p-2 space-y-2">
                                <div class="bg-white p-3 rounded shadow flex items-center gap-3">
                                    <div class="w-10 h-10 bg-gray-200 rounded-full"></div>
                                    <div class="w-3/4 h-2 bg-gray-200 rounded"></div>
                                </div>
                                <div class="bg-white p-3 rounded shadow flex items-center gap-3">
                                    <div class="w-10 h-10 bg-gray-200 rounded-full"></div>
                                    <div class="w-3/4 h-2 bg-gray-200 rounded"></div>
                                </div>
                            </div>
                        `
                    },
                    {
                        title: "Ferramentas Comerciais",
                        desc: "Selecione a op√ß√£o 'Ferramentas comerciais' ou 'Configura√ß√µes'.",
                        screenHtml: `
                            <div class="bg-white shadow rounded-lg m-2 overflow-hidden border border-gray-200">
                                <div class="p-3 border-b flex justify-between items-center bg-gray-100">
                                    <span>Novo grupo</span>
                                </div>
                                <div class="p-3 border-b flex justify-between items-center bg-green-50 border-green-200">
                                    <span class="font-bold text-green-800">Ferramentas comerciais</span>
                                    <span>üëâ</span>
                                </div>
                                <div class="p-3 border-b flex justify-between items-center">
                                    <span>Configura√ß√µes</span>
                                </div>
                            </div>
                        `
                    },
                    {
                        title: "Mensagem de Sauda√ß√£o",
                        desc: "Localize e toque em 'Mensagem de sauda√ß√£o'.",
                        screenHtml: `
                            <div class="p-2">
                                <div class="text-xs uppercase text-gray-500 mb-1 font-bold">Perfil</div>
                                <div class="bg-white p-3 rounded mb-2 shadow-sm">Perfil comercial</div>
                                <div class="bg-white p-3 rounded mb-2 shadow-sm">Cat√°logo</div>
                                
                                <div class="text-xs uppercase text-gray-500 mb-1 font-bold mt-4">Mensagens</div>
                                <div class="bg-white p-3 rounded mb-2 shadow-sm border border-green-400">
                                    Mensagem de sauda√ß√£o
                                    <div class="text-[10px] text-gray-400">Enviar msg autom√°tica...</div>
                                </div>
                                <div class="bg-white p-3 rounded mb-2 shadow-sm opacity-50">Mensagem de aus√™ncia</div>
                            </div>
                        `
                    },
                    {
                        title: "Desativar Op√ß√£o",
                        desc: "Desligue a chave 'Enviar mensagem de sauda√ß√£o' e salve.",
                        screenHtml: `
                            <div class="p-4 bg-white h-full">
                                <div class="flex justify-between items-center mb-4">
                                    <span class="font-bold text-gray-700">Enviar msg de sauda√ß√£o</span>
                                    <div class="toggle-switch checked" id="demo-toggle" onclick="this.classList.toggle('checked')"></div>
                                </div>
                                <div class="text-xs text-gray-500 mb-8">
                                    Envia uma mensagem de boas-vindas quando os clientes entrarem em contato pela primeira vez.
                                </div>
                                <div class="text-center">
                                    <div class="text-xs text-red-500 font-bold mb-1">A√ß√£o necess√°ria:</div>
                                    <div class="inline-block px-3 py-1 border border-red-400 text-red-500 rounded text-sm animate-bounce">
                                        Toque para desligar
                                    </div>
                                </div>
                            </div>
                        `
                    }
                ]
            },
            meta: {
                title: "Configura√ß√£o do Meta Ads",
                desc: "Edite o an√∫ncio para remover o texto pr√©-preenchido.",
                color: "blue",
                header: "Gerenciador de An√∫ncios",
                steps: [
                    {
                        title: "Editar An√∫ncio",
                        desc: "No Gerenciador, v√° at√© o n√≠vel de An√∫ncio e clique em Editar.",
                        screenHtml: `
                            <div class="bg-gray-100 h-full p-2 text-[10px]">
                                <div class="flex gap-1 mb-2">
                                    <div class="bg-gray-300 px-2 py-1 rounded">Campanha</div>
                                    <div class="bg-gray-300 px-2 py-1 rounded">Conjunto</div>
                                    <div class="bg-blue-600 text-white px-2 py-1 rounded font-bold">An√∫ncio</div>
                                </div>
                                <div class="bg-white p-2 border border-blue-400 rounded shadow">
                                    <div class="font-bold mb-1">An√∫ncio 1 - WhatsApp</div>
                                    <div class="flex gap-2 mt-2">
                                        <div class="bg-gray-200 px-2 py-0.5 rounded">Ver gr√°ficos</div>
                                        <div class="bg-blue-100 text-blue-800 px-2 py-0.5 rounded font-bold border border-blue-300">‚úèÔ∏è Editar</div>
                                    </div>
                                </div>
                            </div>
                        `
                    },
                    {
                        title: "Configura√ß√£o de Mensagem",
                        desc: "Role at√© 'Destino' ou 'Modelo de Mensagem' e clique em Editar.",
                        screenHtml: `
                            <div class="bg-white h-full p-2 text-[10px] overflow-hidden">
                                <div class="h-20 bg-gray-100 mb-2 rounded border-l-4 border-gray-300 p-1">Criativo do an√∫ncio...</div>
                                <div class="font-bold text-gray-700 mb-1 mt-4">Modelo de Mensagem</div>
                                <div class="border border-gray-300 p-2 rounded bg-gray-50">
                                    <div class="mb-1">Iniciar conversas</div>
                                    <div class="flex justify-between items-center bg-white border p-1 rounded">
                                        <span>Sauda√ß√£o padr√£o</span>
                                        <span class="bg-gray-200 px-1 rounded text-[8px]">Editar</span>
                                    </div>
                                </div>
                            </div>
                        `
                    },
                    {
                        title: "Remover Texto",
                        desc: "Apague o texto da 'Pergunta Pr√©-preenchida' ou desative o recurso.",
                        screenHtml: `
                            <div class="bg-white h-full p-3 text-[11px]">
                                <div class="font-bold mb-2">Editar modelo</div>
                                <div class="mb-1 text-gray-600">Texto de Sauda√ß√£o:</div>
                                <input type="text" value="Ol√°! Como podemos ajudar?" class="w-full border p-1 mb-3 rounded text-gray-400 italic" disabled>
                                
                                <div class="mb-1 text-blue-700 font-bold">Perguntas frequentes:</div>
                                <div class="relative">
                                    <textarea class="w-full border-2 border-red-400 p-1 rounded h-16 bg-red-50 text-gray-800">Ol√°, vi o an√∫ncio e...</textarea>
                                    <div class="absolute bottom-1 right-1 bg-red-500 text-white px-1 rounded text-[9px]">Apagar isso</div>
                                </div>
                            </div>
                        `
                    }
                ]
            }
        };

        // --- GLOBAL STATE ---
        let currentPath = null;
        let activeStepIndex = 0;
        let chartInstance = null;

        // --- FUNCTIONS ---

        function scrollToSection(id) {
            document.getElementById(id).scrollIntoView({ behavior: 'smooth' });
        }

        function selectPath(path) {
            currentPath = path;
            activeStepIndex = 0;

            // Update UI Selection
            document.getElementById('card-wa').classList.remove('ring-4', 'ring-green-400');
            document.getElementById('card-meta').classList.remove('ring-4', 'ring-blue-400');
            
            if (path === 'wa') {
                document.getElementById('card-wa').classList.add('ring-4', 'ring-green-400');
            } else {
                document.getElementById('card-meta').classList.add('ring-4', 'ring-blue-400');
            }

            renderTutorial();
            
            // Unhide tutorial section and scroll
            const tutorialSection = document.getElementById('tutoriais');
            document.getElementById('steps-container').classList.remove('hidden');
            tutorialSection.scrollIntoView({ behavior: 'smooth' });
        }

        function renderTutorial() {
            const data = tutorialData[currentPath];
            const container = document.getElementById('steps-container');
            
            // Update Headers
            document.getElementById('tutorial-title').innerText = data.title;
            document.getElementById('tutorial-desc').innerText = data.desc;
            document.getElementById('sim-header-title').innerText = data.header;
            
            // Update Sim Header Color
            const simHeader = document.getElementById('sim-header-title').parentElement;
            simHeader.className = `h-16 flex items-center px-4 shadow-md z-10 transition-colors duration-300 ${currentPath === 'wa' ? 'bg-green-700' : 'bg-blue-700'}`;

            // Generate Steps HTML
            container.innerHTML = data.steps.map((step, index) => `
                <div class="step-item relative pl-8 pb-8 cursor-pointer group" onclick="setStep(${index})">
                    <div class="step-connector"></div>
                    <div class="absolute left-0 top-0 w-8 h-8 rounded-full flex items-center justify-center font-bold border-2 transition-all duration-300 
                        ${index === activeStepIndex 
                            ? (currentPath === 'wa' ? 'bg-green-600 border-green-600 text-white scale-110' : 'bg-blue-600 border-blue-600 text-white scale-110') 
                            : 'bg-white border-gray-300 text-gray-500 group-hover:border-gray-400'}">
                        ${index + 1}
                    </div>
                    <div class="ml-4 p-4 rounded-xl transition-all duration-300 ${index === activeStepIndex ? 'bg-white shadow-lg border-l-4 ' + (currentPath === 'wa' ? 'border-green-500' : 'border-blue-500') : 'hover:bg-gray-50'}">
                        <h4 class="font-bold text-lg ${index === activeStepIndex ? 'text-gray-900' : 'text-gray-600'}">${step.title}</h4>
                        <p class="text-sm text-gray-500 mt-1">${step.desc}</p>
                    </div>
                </div>
            `).join('');

            updateSimulator();
        }

        function setStep(index) {
            activeStepIndex = index;
            renderTutorial(); // Re-render to update active classes
        }

        function updateSimulator() {
            const data = tutorialData[currentPath];
            const screen = document.getElementById('sim-screen');
            
            // Simple fade effect
            screen.style.opacity = '0';
            setTimeout(() => {
                screen.innerHTML = data.steps[activeStepIndex].screenHtml;
                screen.style.opacity = '1';
            }, 200);
        }

        // --- CHART & CHECKLIST LOGIC ---

        function initChart() {
            const ctx = document.getElementById('progressChart').getContext('2d');
            chartInstance = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Conclu√≠do', 'Pendente'],
                    datasets: [{
                        data: [0, 100],
                        backgroundColor: ['#10b981', '#e5e7eb'],
                        borderWidth: 0,
                        hoverOffset: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '70%',
                    plugins: {
                        legend: { display: false },
                        tooltip: { enabled: false }
                    }
                },
                plugins: [{
                    id: 'textCenter',
                    beforeDraw: function(chart) {
                        var width = chart.width,
                            height = chart.height,
                            ctx = chart.ctx;
            
                        ctx.restore();
                        var fontSize = (height / 114).toFixed(2);
                        ctx.font = "bold " + fontSize + "em sans-serif";
                        ctx.textBaseline = "middle";
                        ctx.fillStyle = "#374151";
            
                        var text = Math.round(chart.data.datasets[0].data[0]) + "%",
                            textX = Math.round((width - ctx.measureText(text).width) / 2),
                            textY = height / 2;
            
                        ctx.fillText(text, textX, textY);
                        ctx.save();
                    }
                }]
            });
        }

        function updateProgress() {
            const checkboxes = document.querySelectorAll('.task-check');
            const total = checkboxes.length;
            const checked = Array.from(checkboxes).filter(c => c.checked).length;
            const percentage = (checked / total) * 100;

            // Update Chart
            chartInstance.data.datasets[0].data = [percentage, 100 - percentage];
            chartInstance.update();

            // Show Completion Message
            const msg = document.getElementById('completion-message');
            if (percentage === 100) {
                msg.classList.remove('hidden');
            } else {
                msg.classList.add('hidden');
            }
        }

        // Initialize on load
        window.addEventListener('load', () => {
            initChart();
        });

    </script>
</body>
</html>